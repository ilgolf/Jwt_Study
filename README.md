# Jwt_Study

## JWT를 사용하는 이유

기존에 Session 방식은 Statless한 방식이 아닌 stateful한 방식이고 서버를 확장해 나갈 때 세션을 복제해야한다는 불편함이 있다.

JWT는 Stateless한 방식의 인증방식을 제공한다. 클라이언트가 로그인 시 일정한 유효기간을 갖는 AccessToken를 발급하여 인증한다. 서버 확장해 나갈 때 

이러한 불편을 덜어줄 수 있다. 물론 Jwt도 refresh토큰을 Redis에 저장하여 Stateful한 방식을 사용하는 경우도 있지만 AccessToken은 발급되고 Expired Time 동안 사용하고 끊어지기 때문에 

데이터베이스에 의존하지 않는 쉬운 인증 및 인가 방법을 제공합니다. 마이크로 서비스에서도 이와 같은 이유로 사람들이 많이 사용합니다. 

또한 서버를 복제하여 트래픽을 분산시키는 Scale out에 용이하고 stateless한 방식을 사용하는 경우 연결 후 바로 연결을 끊어버리는 방식이기 때문에 트래픽에 대한 부담이 낮습니다.

하지만 JWT는 더 많은 필드가 추가되면 비용이 더 커집니다. 토큰은 요청에 의해 전송되므로 데이터 트래픽 크기에 영향을 미칠 수 있습니다.

## 회원 인증시 사용하는 JWT

JWT 를 사용하는 가장 흔한 시나리오 입니다. 사용자가 로그인을 하면, 서버는 사용자의 정보를 기반으로한 토큰을 발급합니다.
그 후, 사용자가 서버에 요청을 할 때 마다 JWT를 포함하여 전달합니다. 
서버는 클라이언트에서 요청을 받을때 마다, 해당 토큰이 유효하고 인증됐는지 검증을 하고, 사용자가 요청한 작업에 권한이 있는지 확인하여 작업을 처리합니다.
서버에서는 사용자에 대한 세션을 유지 할 필요가 없습니다. 즉 사용자가 로그인되어있는지 안되어있는지 신경 쓸 필요가 없고, 사용자가 요청을 했을때 토큰만 확인하면 되므로 
세션 관리가 필요 없어서 서버 자원과 비용을 절감할 수 있습니다.

![JWT webToken](https://i1.wp.com/www.opennaru.com/wp-content/uploads/2018/08/jwt_process_image_v2.png?fit=1920%2C1080)


## Ref.

http://www.opennaru.com/opennaru-blog/jwt-json-web-token/
